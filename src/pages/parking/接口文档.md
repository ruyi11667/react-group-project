# 停车场管理

**<u>含？修饰为选填参数，无？修饰为必填参数</u>**

### 停车场信息

##### 获取（查询）停车场信息

> url: 				/api/parking/park/getList
>
> method:		GET
>
> params:		
>
> ```json
> params: {
>    	parkID?: string, // 停车场ID
>    	parkName?: string, // 停车场名称
>     	province?: string, // 省
>     	city?: sting // 市
>    	principal?: string, // 负责人
> 	state?: all/open/off // 状态（全部，开启，关闭）
> }
> ```
> 
> response: 
>
> ```json
>response: {
>  	code: 0,
>  	message: 'ok',
>     	data: {
>            parkID: string, // 停车场ID
>            parkName: string, // 停车场名称
>            province: string, // 省
>            city: string, // 市
>            street: string // 街道
>            longitude: number, // 经度
>            latitude: number // 纬度
>            spotSum: number, // 车位数
>            state: open/off, // 状态（开启，关闭）
>    	}
>    }
>    ```

##### 查看停车场详情信息

> url:				/api/parking/park/getInfo
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID(必填)
> }
> ```
>
> response:
>
> ```json
> response: {
>    	code: 0,
>        message: 'ok',
>        data: {
>            parkID: string, // 停车场ID
>            parkName: string, // 停车场名称
>            province: string, // 省
>            city: string, // 市
>            street: string // 街道
>            longitude: number, // 经度
>            latitude: number // 纬度
>            spotSum: number, // 车位数
>            state: open/off, // 状态（开启，关闭）
>            carportSum: number, // 车库数
>            principal: string, // 负责人
>            principalCall: string, // 联系方式
>            ruleArr: [ruleName], // 计费规则（可为多条）
>        	addMan: string, // 添加人
>        	addTime: getData(), // 添加时间（年月日，时分秒）
>    	}
>    }
>    ```

##### 修改（新增）停车场信息

> url:				/api/parking/park/changeInfo			
>
> method:		POST
>
> params:
>
> ```json
>params: {
>     _id?: string, // 若有该项，则为修改信息。若没改想，则为新增信息
>    parkID: string, // 停车场ID
>     parkName: string, // 停车场名称
>     province: string, // 省
>        city: string, // 市
>        street: string // 街道
>        longitude: number, // 经度
>        latitude: number // 纬度
>        spotSum: number, // 车位数
>        state: open/off, // 状态（开启，关闭）
>        carportSum: number, // 车库数
>        ruleArr: [ruleName], // 计费规则（可为多条）
>    	addMan: string, // 添加人(这里使用添加该数据的用户)
>    }
>    ```
>    
>    **<u>若为修改，则所有参数均可选。</u>**
>    
>    **<u>若为新增，则所有参数必填。</u>**
>    
> response:
> 
>```json
> response: {
>    code: 0,
>     message: 'ok'
>}
> ```

##### 删除停车场信息

> url:				/api/parking/park/delete
>
> method:		GET
>
> params:
>
> ```json
> params: {
>        parkID: string, // 停车场ID
> }
> ```
>
> response: 
>
> ```json
> response: {
>        code: 0,
>        message: 'ok',
> }
> ```



### 停车位信息

##### 停车位查询

> url:			/api/parking/spot/getList
>
> method:	GET
>
> params: 
>
> ```json
> params: {
>        parkID?: string, // 停车场ID
>        parkName?: string, // 停车场名称
>        carportID?: string, // 车库编号
>        carportName?: string, // 车库名称
> 	carportKind?: all/planeCarport/stereCarport, // 车库类型（全部，平面车库，立体车库）
> 	state?: all/open/off // 状态（全部，开启，关闭）
> }
> ```
>
> response:
>
> ```json
> response: {
>        code: 0,
>        message: 'ok',
>        data: {
>            parkID: string, // 停车场ID
>            parkName: string, // 停车场名称
>            carportID: string, // 车库编号
>            carportName: string, // 车库名称
>            carportKind: planeCarport/stereCarport, // 车库类型（平面车库，立体车库）
>            publicSpotSum: number, // 公用车位数
>            privateSpotSum: number, // 私人停车位
>            usableSpotSum: number, // 可用车位数
>            spotSum: number, // 车位数
>            state: open/off, // 状态（开启，关闭）
>        }
> }
> ```

##### 查询车库具体信息

> url:				/api/parking/spot/getInfo
>
> method:		GET
>
> params:
>
> ```json
> params: {
>        parkID: string, // 停车场ID
>        carportID: string // 车库编号
> }
> ```
>
> response:
>
> ```json
> response: {
>        code: 0,
>        message: 'ok',
>        data: {
>            parkID: string, // 停车场ID
>            parkName: string, // 停车场名称
>            carportID: string, // 车库编号
>            carportName: string, // 车库名称
>            carportKind: planeCarport/stereCarport, // 车库类型（平面车库，立体车库）
>            publicSpotSum: number, // 公用车位数
>            privateSpotSum: number, // 私人停车位
>            usableSpotSum: number, // 可用车位数
>            spotSum: number, // 车位数
>            everyFloor: {
>                /* 
>             若carportKind为planeCarport则该项仅有一对键值对，
>         	F1: 车辆数
>             */
>                // 每层车位数， floor楼层， number 车位数
>                floor: number,
>                floor: number
>            }
>            state: open/off, // 状态（开启，关闭）
>        }
> }
> ```

##### 新增（编辑）车库信息

> url:			
>
> ​		/api/parking/spot/newInfo			(新增，所有参数必填（除了everyFloor）)
>
> ​		/api/parking/spot/changeInfo		(修改， 所有参数可选)
>
> method:			POST
>
> params:
>
> ```json
> params: {
>        parkID: string, // 停车场ID
>        parkName: string, // 停车场名称
>        carportID: string, // 车库编号
>        carportName: string, // 车库名称
>        carportKind: planeCarport/stereCarport, // 车库类型（平面车库，立体车库）
>        publicSpotSum: number, // 公用车位数
>        privateSpotSum: number, // 私人停车位
>        usableSpotSum: number, // 可用车位数
>        spotSum: number, // 车位数
>        everyFloor?: {  
>            /* 
>                     若carportKind为planeCarport则该项仅有一对键值对，
>                    1F: 车辆数
>                 */
>            // 每层车位数， floor楼层， number 车位数
>            floor: number,
>            floor: number
>    	}
>    	state: open/off, // 状态（开启，关闭）
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
> }
> ```

##### 请求某层的车位信息

> url:				/api/parking/spot/floorInfo
>
> methods:	GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
>     carportID: string, // 车库编号
>     floor: string, // 楼层信息
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         '001': { // 车位在该层的编号
>             isPublic: boolean, // 是否为公共车位， true：公共车位；false：私人
>             isUsed: boolean, // 是否被占用， true：该车位有人； false：该车位没人
>             carId: string, // 若为私人车位，则该项有值，且为车牌号
>         }
>     }
> }
> ```

##### 修改某层车位信息

> url:				/api/parking/spot/changeFloorInfo
>
> methods:	POST
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
>     carportID: string, // 车库编号
>     floor: string, // 楼层信息
>     stallID: string, // 车位在该层的编号
>     isPublic?: boolean, // 是否为公共车位， true：公共车位；false：私人
>     isUsed?: boolean, // 是否被占用， true：该车位有人； false：该车位没人
>     carId?: string, // 若为私人车位，则该项有值，且为车牌号
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok'
> }
> ```

##### 删除车库信息

> url:				/api/parking/spot/deletecarport
>
> methods:	GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
>     carportID: string, // 车库编号
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok'
> }
> ```

### 计费规则信息

##### 计费规则查询

> url:				/api/parking/billing/getList
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     ruleID?: string, // 计费规则编号
>     ruleName?: string, // 计费规则名称
>     userKind?: all/temporaryUser/dayUser/timeUser/cardUser, // 用户类型（全部/临时车主/包天卡车主/时长卡车主/次卡车主）
>     billingMode?: all/timeLong/timeSection/number, // 计费方式（全部/时长计费/时段计费/按次计费）
>     freeTime?: number // 免费时长
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         ruleID: string, // 计费规则编号
>         ruleName: string, // 计费规则名称
>         userKind: temporaryUser/dayUser/timeUser/cardUser, // 用户类型（临时车主/包天卡车主/时长卡车主/次卡车主）
>         billingMode: timeLong/timeSection/number, // 计费方式（时长计费/时段计费/按次计费）,
>         ruleContent: [], // 计费规则
>         freeTime: number, // 免费时长
>         costLimit: number, // 费用上限
>         useNum: number // 应用数量
>     }
> }
> ```

##### 查看计费规则详情信息

> url:				/api/parking/billing/getInfo
>
> method:		GET
>
> params:
>
> ```json
> params: {
>  ruleID?: string, // 计费规则编号
> }
> ```
>
> response:
>
> ```json
> response: {
>  code: 0,
>  message: 'ok',
>  data: {
>      ruleID: string, // 计费规则编号
>      ruleName: string, // 计费规则名称
>      userKind: all/temporaryUser/dayUser/timeUser/cardUser, // 用户类型（全体车主/临时车主/包天卡车主/时长卡车主/次卡车主）
>      billingMode: timeLong/timeSection/number, // 计费方式（时长计费/时段计费/按次计费）,
>      ruleContent: [], // 计费规则，将规则的数据做成一个数组放入ruleContent中
>      specialRule: [ // 指定时段单独计费的特殊规则（数组为空则表示没有特殊规则）
>          [], // 每条规则的存储方式按照ruleContent的方式存储
>          []
>      ]
>      freeTime: number, // 免费时长
>      costLimit: number, // 费用上限
>      useNum: number // 应用数量
>      addMan: string // 创建人
>      addTime: getData() // 创建时间
>  }
> }
> ```

##### 修改（新增）计费规则信息

> url:				/api/parking/billing/changeInfo			
>
> method:		POST
>
> params:
>
> ```json
> params: {
>     _id?: string, // 若有该项，则为修改信息。若没改想，则为新增信息
> 	ruleID: string, // 计费规则编号
> 	ruleName: string, // 计费规则名称
> 	userKind: all/temporaryUser/dayUser/timeUser/cardUser, // 用户类型（全体车主/临时车主/包天卡车主/时长卡车主/次卡车主）
>     billingMode: timeLong/timeSection/number, // 计费方式（时长计费/时段计费/按次计费）,
>     ruleContent: [], // 计费规则，将规则的数据做成一个数组放入ruleContent中
>     specialRule: [ // 指定时段单独计费的特殊规则（数组为空则表示没有特殊规则）
>         [], // 每条规则的存储方式按照ruleContent的方式存储
>         []
>     ]
>     freeTime: number, // 免费时长
>     costLimit: number, // 费用上限
>     useNum: number // 应用数量
>     addMan: string // 创建人
> }
> ```
>
> **<u>若为修改，则所有参数均可选。</u>**
>
> **<u>若为新增，则所有参数必填。</u>**
>
> response:
>
> ```json
> response: {
>  code: 0,
>  message: 'ok'
> }
> ```

##### 删除计费规则信息

> url:				/api/parking/park/delete
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
> }
> ```
>
> response: 
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
> }
> ```



### 车位卡信息

##### 车位卡查询

> url:				/api/parking/getCard
>
> method:		GET
>
> params:
>
> ```json
> params: {
>        parkID?: string, // 停车场ID
>        parkName?: string, // 停车场名称
>        cardID?: string, // 车位卡编号
>        cardName?: string, // 车位卡名称
>     cardKind?: all/day/time/number, // 车位卡类型（全部/包天卡/时长卡/次卡）
> 	state?: all/open/off // 状态（全部，开启，关闭）
> }
> ```
>
> response: 
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         parkID: string, // 停车场ID
>         parkName: string, // 停车场名称
>         cardID: string, // 车位卡编号
>         cardName: string, // 车位卡名称
>         cardKind: all/day/time/number, // 车位卡类型（全部/包天卡/时长卡/次卡）
>         content: string, // 内容
>         price: number, // 价格
>         haveMan: number, // 持有人数
>         sumSales: number, // 累计销量
>         state: open/off, // 状态（开启，关闭）
>     }
> }
> ```

##### 查看车位卡详情信息

> url:				/api/parking/getInfo
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID(必填)
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         parkID: string, // 停车场ID
>         parkName: string, // 停车场名称
>         parkAddress: { // 停车场地址
>         	province: string, // 省
>             city: string, // 市
>             street: string // 街道
>         },
>         GPS: { // 经纬度
>             longitude: number, // 经度
>             latitude: number // 纬度
>         },
>         spotSum: number, // 车位数
>         state: open/off, // 状态（开启，关闭）
>         carportSum: number, // 车库数
>         principal: string, // 负责人
>         principalCall: string, // 联系方式
>         ruleArr: [ruleName], // 计费规则（可为多条）
>         addMan: string, // 添加人
>         addTime: getData(), // 添加时间（年月日，时分秒）
>     }
> }
> ```

##### 修改（新增）车位卡信息

> url:				
>
> ​		/api/parking/park/changeInfo			(修改信息，所有参数均可选)
>
> ​		/api/parking/park/newInfo				(新增信息，所有参数均必填)
>
> method:		POST
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
>     parkName: string, // 停车场名称
>     parkAddress: { // 停车场地址
>         province: string, // 省
>         city: string, // 市
>         street: string // 街道
>     },
>     GPS: { // 经纬度
>         longitude: number, // 经度
>         latitude: number // 纬度
>     },
>     spotSum: number, // 车位数
>     state: open/off, // 状态（开启，关闭）
>     carportSum: number, // 车库数
>     ruleArr: [ruleName], // 计费规则（可为多条）
>     addMan: string, // 添加人(这里使用添加该数据的用户)
>     addTime: getData(), // 添加时间（年月日，时分秒）（这里使用添加该数据的时间）
> }
> ```
>
> **<u>若为修改，则所有参数均可选。</u>**
>
> **<u>若为新增，则所有参数必填。</u>**
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok'
> }
> ```

##### 删除车位卡信息

> url:				/api/parking/park/delete
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
> }
> ```
>
> response: 
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
> }
> ```



### 设备信息

##### 设备查询

> url:				/api/parking/getEquipment
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     equID?: string, // 设备编号
>     equName?: string, // 设备名称
>     equIP?: string, // 设备序列号
>     addMan?: string, // 添加人
>     park?: all/centralPark/internationPark, // 停车场（全部/中原福塔停车场/国际陆港停车场）
>     state?: all/open/off // 状态（全部/开启，关闭）
> }
> ```
>
> response: 
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         equID: string, // 设备编号
>         equName: string, // 设备名称
>         equSerial: string, // 设备序列号
>         equIP: string, // IP
>         park: all/centralPark/internationPark, // 停车场（全部/中原福塔停车场/国际陆港停车场）
>         addMan: string, // 添加人
>         addTime: getData(), // 添加时间（年月日，时分秒）
>         state: all/open/off // 状态（全部/开启，关闭）
>     }
> }
> ```

##### 查看设备详情信息

> url:				/api/parking/getInfo
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID(必填)
> }
> ```
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
>     data: {
>         parkID: string, // 停车场ID
>         parkName: string, // 停车场名称
>         parkAddress: { // 停车场地址
>         	province: string, // 省
>             city: string, // 市
>             street: string // 街道
>         },
>         GPS: { // 经纬度
>             longitude: number, // 经度
>             latitude: number // 纬度
>         },
>         spotSum: number, // 车位数
>         state: open/off, // 状态（开启，关闭）
>         carportSum: number, // 车库数
>         principal: string, // 负责人
>         principalCall: string, // 联系方式
>         ruleArr: [ruleName], // 计费规则（可为多条）
>         addMan: string, // 添加人
>         addTime: getData(), // 添加时间（年月日，时分秒）
>     }
> }
> ```

##### 修改（新增）设备信息

> url:				
>
> ​		/api/parking/park/changeInfo			(修改信息，所有参数均可选)
>
> ​		/api/parking/park/newInfo				(新增信息，所有参数均必填)
>
> method:		POST
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
>     parkName: string, // 停车场名称
>     parkAddress: { // 停车场地址
>         province: string, // 省
>         city: string, // 市
>         street: string // 街道
>     },
>     GPS: { // 经纬度
>         longitude: number, // 经度
>         latitude: number // 纬度
>     },
>     spotSum: number, // 车位数
>     state: open/off, // 状态（开启，关闭）
>     carportSum: number, // 车库数
>     ruleArr: [ruleName], // 计费规则（可为多条）
>     addMan: string, // 添加人(这里使用添加该数据的用户)
>     addTime: getData(), // 添加时间（年月日，时分秒）（这里使用添加该数据的时间）
> }
> ```
>
> **<u>若为修改，则所有参数均可选。</u>**
>
> **<u>若为新增，则所有参数必填。</u>**
>
> response:
>
> ```json
> response: {
>     code: 0,
>     message: 'ok'
> }
> ```

##### 删除设备信息

> url:				/api/parking/park/delete
>
> method:		GET
>
> params:
>
> ```json
> params: {
>     parkID: string, // 停车场ID
> }
> ```
>
> response: 
>
> ```json
> response: {
>     code: 0,
>     message: 'ok',
> }
> ```



